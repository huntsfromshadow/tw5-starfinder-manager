author: huntsfromshadow
core-version: >= 5.1.22
created: 20200831202346219
description: Manager to help GMs organize data for a Starfinder campaign.
list: README license history settings
modified: 20200909195959386
plugin-type: plugin
source: https://github.com/huntsfromshadow/tw5-starfinder-manager
tags: 
title: $:/plugins/huntsfromshadow/SF_RPG_Manager
type: application/json
version: 1.0.4

{"tiddlers":{"$:/plugins/huntsfromshadow/SF_RPG_Manager/README":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/README","created":"20200831202408657","modified":"20200907193737636","tags":"","type":"text/vnd.tiddlywiki","text":"Manage //Starfinder// campaigns with [[TiddlyWiki|https://tiddlywiki.com]].\n\n! Thanks\nSpcial thanks for Ben Webber's ~DnD tiddlywiki for examples and code I could work from. Was a lot of help. [[https://github.com/benwebber/tiddlywiki-dnd]]\n\n! Download This Wiki\nIf you want to just use this version download a copy of this file at [[https://huntsfromshadow.github.io/TW5_StarfinderRPGManager/index.html]]\n\n! Install in your own ~TiddlyWiki\n\n[[Manually install|https://tiddlywiki.com/#Manually%20installing%20a%20plugin]] the plugin by dragging this link to your ~TiddlyWiki:\n\n<$list\n  filter=\"[<transclusion>prefix[{$:/plugins/huntsfromshadow/SF_RPG_Manager/README|$:/plugins/huntsfromshadow/SF_RPG_Manager/README|||}]]\"\n  emptyMessage=\"[[$:/plugins/huntsfromshadow/SF_RPG_Manager]]\"\n>\n{{$:/plugins/huntsfromshadow/SF_RPG_Manager||$:/core/ui/Components/plugin-info}}\n</$list>\n\nThen save and refresh your ~TiddlyWiki.\n\n! Source Repository\nThe source repository for this code is located at\n[[https://github.com/huntsfromshadow/tw5-starfinder-manager]].\n\n! Quick Start\n\n!! Import / Create a new creature\n\n<!-- Set variables to render button as it appears in the toolbar. -->\n<$vars tv-config-toolbar-text=\"yes\" tv-config-toolbar-class=\"\">\nEnable the {{$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportNPC}} tool to import new npcs from a copy and paste statblock, or create an empty npc tiddler ready for you to fill in.\n</$vars>\n\nSee [[Living Hologram]] and [[Elder Air Elemental]] as an example.\n\n!! Import / Create a new trap\n\n<!-- Set variables to render button as it appears in the toolbar. -->\n<$vars tv-config-toolbar-text=\"yes\" tv-config-toolbar-class=\"\">\nEnable the {{$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportTrap}} tool to create new spell tiddlers with a single click.\n</$vars>\n\nSee [[Pit Trap]] as an example.\n\n! Configuration\n\nNavigate to the plugin info tiddler [[$:/plugins/huntsfromshadow/SF_RPG_Manager]], then go to the ''Settings'' tab.\n\n! Code Details\nFor those that want to extend or alter the plugin's code here are some details. Leaving off anything that is very self explanatory (stylessheets, variables, states).\n\n!! Overview\n* All code is under $:plugins/huntsfromshadow/SF_RPG_Manager. Only things that should be in non shadowed tiddlers are the user's campaign data.\n* All entities (npcs, traps) has their data stored in fields on the tiddler.\n\n!! Code Breakdown\n!!! Macros\n* [[npc-display.js|$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/npc-display.js]] is a global javascript macro that handles displaying the npc in a standard Starfinder format. It loads the data from the tiddler fields.\n* [[trap-display.js|$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/npc-display.js]] is a global javascript macro that handles displaying the npc in a standard Starfinder format. It loads the data from the tiddler fields.\n* Quite a few files have local macros to help assist layout of tables and fields. They will be at the top of the tiddler.\n!!! Templates\n* NPCTemplate standardizes the display of an npc and has the logic to trigger the edit modals.\n* TrapTemplate standardizes the display of a trap and has the logic to trigger the edit modals.\n!!! UI\n* Code for the NPC Editor and Trap Editor is located under ~$:/plugins/huntsfromshadow/SF_RPG_Manager/ui\n!!! Widgets\n* [[action-rawtext-npc-import.js|$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-npc-import.js]] is the widget that handles the actual translation from statblock to NPC.\n* [[action-rawtext-trap-import.js|$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-trap-import.js]] is the widget that handles the actual translation from statblock to trap.\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/npc-display.js":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/npc-display.js","text":"/*\\\ncreated: 20200901181119396\ntype: application/javascript\ntitle: $:/plugins/huntsfromshadow/SF_RPG_Manager/commands/npc-display.js\ntags: \nmodified: 20200901182155203\nmodule-type: macro\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/* Tells TiddlyWiki the name of our macro through the export mechanism. */\nexports.name = \"npc-display\";\n\n/* Lists of macro parameters; leave this array empty if you need none, or\n * want all supplied macro call parameters to be passed to the run() method.\n */\nexports.params = [  ];\n\nvar npcDebugTxt = \"DEBUG NOPE\";\nvar sectionUnderlineColor = \"Black\";\n\nfunction txtOrEmpty(field, txt) {\n  if (field != npcDebugTxt) {\n    return txt;\n  }\n  else {\n    return \"\";\n  }\n}\n\nfunction genderRaceClassBlock(tid) {\n  //Figure out what is present\n  if(\n    tid.fields.npc_gender != npcDebugTxt ||\n    tld.fields.npc_race != npcDebugTxt ||\n    tld.fields.npc_class != npcDebugTxt ) {\n    \n  }\n}\n\nfunction defensiveAbilitiesImmunitiesBlock(tid) {  \n  var retval = \"\";\n\n  if(tid.fields.npc_defensive_abilities != npcDebugTxt) {\n    retval = retval + \"<b>Defensive Abilities</b> \" + \n      txtOrEmpty(tid.fields.npc_defensive_abilities, \"{{!!npc_defensive_abilities}}\");\n  }\n\n  if(tid.fields.npc_immunities != npcDebugTxt) {\n    retval = retval + \"<b>Immunities</b> \" +\n      txtOrEmpty(tid.fields.npc_immunities, \"{{!npc_immunities}}\");\n  }\n  \n  if(retval != \"\") {\n    retval = \"<p class='no_tb_margin'>\" + retval + \"</p>\";\n  }  \n\n  return retval;\n}\n\nfunction weaknessesBlock(tid) {\n  console.log(\"In weakness\");\n  if(tid.fields.npc_weaknesses != npcDebugTxt) {\n    return `\n      <p class=\"no_tb_margin\">\n        <b>Weaknesses</b> {{!!npc_weaknesses}}\n      </p>`;\n  }\n  else {\n    return \"\";\n  }\n\n}\n\n//Format of datalist\n//[ field name, ...]\nfunction singleLineNoHeaders(tid, datalist) {\n  var retval = \"\";\n  datalist.forEach(ele => {\n    var fname = ele;\n\n    if(tid.fields[ele] != npcDebugTxt) {\n      retval = retval + \"{{!!\" + ele + \"}} \";\n    }\n  });\n\n  if(retval != \"\") {\n    retval = '<p class=\"no_tb_margin\">' + retval + \"</p>\";\n  }\n\n  return retval;\n}\n\n//Format of datalist\n/* [\n[ fieldname, header, post ]\n]*/\nfunction singleLineWithHeaders(tid, datalist, hang=false) {\n\n  console.log(tid);\n  console.log(datalist);\n\n  var retval = \"\";\n\n  datalist.forEach(ele => {\n    var fieldname = ele[0];\n    var header = ele[1];\n    var post = ele[2];\n  \n    if( (tid.fields[fieldname] != npcDebugTxt)\n        && (tid.fields[fieldname] != \"\") ) {\n      retval = retval + \" \" + header + \"{{!!\" + \n        fieldname + \"}}\" + post;\n    }\n  });\n  \n  if(retval != \"\") {\n    if(hang == false) {\n      retval = '<p class=\"no_tb_margin\">' + retval + \"</p>\";\n    }\n    else {\n      retval = '<p class=\"no_tb_margin hang_indent\">' + retval + \"</p>\";      \n    }\n  }\n\n  return retval;\n}\n\nfunction spellLikeAbility(tid) {\n  var retval = \"\";\n\n  \n  if(\n    (tid.fields.npc_sla !== undefined) &&\n    (tid.fields.npc_sla !== npcDebugTxt) &&\n    (tid.fields.npc_sla !== \"\") ) {\n    var d = tid.fields.npc_sla;\n    d = d.split(\"|\");\n\n    var val = `\n    <p class=\"no_tb_margin hang_indent\">\n      <b>Spell-Like Abilities</b> (CL ${d[0]})<br/>\n    `;\n\n    var dat = tid.fields.npc_sla;\n\n    var la = dat.split(\"|\");\n    la.shift();\n\n    la.forEach(element => {\n      val = val + element + \"<br />\";\n    });\n    val = val + \"</p>\";\n\n    retval = val;\n  }\n\n  return retval;\n  \n}\n\nfunction defenseHeader(tid) {\n  var retval = `\n  <p class=\"no_tb_margin section_underline\" id=\"defense_hp_row\" \n  style=\"border-bottom-color: ${sectionUnderlineColor};\">\n  <b>DEFENSE</b> \n  <span id=\"hp\"><b>HP</b> {{!!npc_hp}} `;\n\n  if(tid.fields.npc_rp !== undefined &&\n      tid.fields.npc_rp != npcDebugTxt && \n      tid.fields.npc_rp != \"\" ) {\n    retval = retval + \"&nbsp;<b>RP</b> {{!!npc_rp}}\";\n  }\n\n  retval = retval + \"</span></p>\";\n  return retval;\n}\n\nfunction ecologySection(tid) {\n  var retval = \"\";\n\n  if(tid.fields.npc_enviornment !== undefined &&\n      tid.fields.npc_enviornment !== npcDebugTxt &&\n      tid.fields.npc_enviornment !== \"\" ) {\n    retval = retval + `<p class=\"no_tb_margin section_underline\"\n      style=\"border-bottom-color: ${sectionUnderlineColor};\">\n    <b>Ecology</b>\n      </p>`;\n\n    retval = retval + singleLineWithHeaders(tid, [\n      [\"npc_enviornment\", \"<b>Enviornment</b> \", \"\"]\n    ]);    \n    retval = retval + singleLineWithHeaders(tid, [\n      [\"npc_organization\", \"<b>Organization</b> \", \"\"]\n    ]);        \n  }\n\n  return retval;\n}\n\nfunction specialAbilities(tid) {\n  var retval = \"\";\n  if(tid.fields.npc_special_abilities !== undefined) {\n\n    retval = retval + '<p class=\"no_tb_margin section_underline\" id=\"defense_hp_row\" ' + \n      `style=\"border-bottom-color: ${sectionUnderlineColor};\"` + '><b>SPECIAL ABILITIES</b></p>';\n    \n    var d = tid.fields.npc_special_abilities.split(\"|\");\n    d.forEach(element => {\n      retval = retval + '<p class=\"no_tb_margin hang_indent\">' + \n      element + \"</p>\";            \n    });    \n  }\n\n  return retval;\n}\n\n/* Executes (runs) our macro when it requires evaluation; returns a string\n * value.\n */\nexports.run = function() {\n  tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor\");\n  if(tid === undefined) {    \n    sectionUnderlineColor = \"Black\";\n  }\n  else {\n    sectionUnderlineColor = tid.fields.text;\n  }\n\n  var tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport\");\n      \n  var tid = this.wiki.getTiddler(\n      this.getVariable(\"currentTiddler\") );\n  \n  console.log(tid);\n\n  var outval = `\n<div id='sf_character'>\n  \n  <p class=\"no_tb_margin\" id=\"name_cr_row\">\n    <span>{{!!npc_name}}</span> \n    <span id=\"cr\">CR {{!!npc_cr}}</span>\n  </p>\n  ${singleLineWithHeaders(tid, [[\"npc_xp\", \"<b>XP \", \"</b>\"]])}  \n  ${singleLineNoHeaders(tid, [\"npc_gender\", \"npc_race\", \"npc_class\"] )}\n  ${singleLineNoHeaders(tid, [\"npc_alignment\", \"npc_size\", \n    \"npc_type\", \"npc_subtype\"] )}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_init\", \"<b>Init</b> \", \";\"],\n    [\"npc_senses\", \"<b>Senses</b> \", \";\"],\n    [\"npc_perception\", \"<b>Perception</b> \", \"\"]], true)}  \n  ${singleLineWithHeaders(tid, [[\"npc_aura\", \"<b>Aura</b> \", \"\"]])}\n  ${defenseHeader(tid)}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_eac\", \"<b>EAC</b> \", \";\"],\n    [\"npc_kac\", \"<b>KAC</b> \", \"\"]] )}  \n  ${singleLineWithHeaders(tid, [\n      [\"npc_fort\", \"<b>Fort</b> \", \";\"],\n      [\"npc_ref\", \"<b>Ref</b>\", \";\"], \n      [\"npc_will\", \"<b>Will</b>\", \"\"]])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_defensive_abilities\", \"<b>Defensive Abilities</b> \", \";\"],\n    [\"npc_dr\", \"<b>DR</b> \", \";\"],\n    [\"npc_immunities\", \"<b>Immunities</b> \", \";\"],\n    [\"npc_sr\", \"<b>SR</b> \", \"\"]\n  ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_weaknesses\", \"<b>Weaknesses</b> \", \";\"],\n  ])}\n  <p class=\"no_tb_margin section_underline\"\n    style=\"border-bottom-color: ${sectionUnderlineColor};\">\n      <b>OFFENSE</b>\n  </p>\n  ${singleLineWithHeaders(tid, [\n    [\"npc_speed\", \"<b>Speed</b> \", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_melee\", \"<b>Melee</b> \", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_multiattack\", \"<b>Multiattack</b> \", \"\"] ])}    \n  ${singleLineWithHeaders(tid, [\n      [\"npc_ranged\", \"<b>Ranged</b> \", \"\"] ])}  \n  ${singleLineWithHeaders(tid, [\n        [\"npc_space\", \"<b>Space</b> \", \"\"],\n        [\"npc_reach\", \"<b>Reach</b> \", \"\"] ])}  \n  ${singleLineWithHeaders(tid, [\n      [\"npc_offensive_abilities\", \"<b>Offensive Abilities</b> \", \"\"] ])}     \n  ${spellLikeAbility(tid)}\n  <p class=\"no_tb_margin section_underline\" style=\"border-bottom-color: ${sectionUnderlineColor};\">\n      <b>STATISTICS</b>\n  </p>\n  ${singleLineWithHeaders(tid, [\n    [\"npc_str\", \"<b>Str</b> \", \";\"],\n    [\"npc_dex\", \"<b>Dex</b>\", \";\"], \n    [\"npc_con\", \"<b>Con</b>\", \";\"],\n    [\"npc_int\", \"<b>Int</b> \", \";\"],\n    [\"npc_wis\", \"<b>Wis</b>\", \";\"], \n    [\"npc_cha\", \"<b>Cha</b>\", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_skills\", \"<b>Skills</b> \", \"\"] ], true)}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_feats\", \"<b>Feats</b> \", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_languages\", \"<b>Languages</b> \", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_other_abilities\", \"<b>Other Abilities</b> \", \"\"] ])}\n  ${singleLineWithHeaders(tid, [\n    [\"npc_gear\", \"<b>Gear</b> \", \"\"] ], true)}      \n  ${ecologySection(tid)}\n  ${specialAbilities(tid)}\n  <br />  \n  ${singleLineWithHeaders(tid, [\n    [\"npc_source\", \"<b>Source</b> \", \"\"] ], true)}      \n</div>`;\n\n  return outval;\n\n  //Hold some data\n  //<p class=\"no_tb_margin\">\n  //    <b>Ranged</b> {{!!npc_ranged}}\n  //</p>\n  /*\n\n  <p class=\"no_tb_margin\">\n    <b>XP {{!!npc_xp}}</b>\n  </p>\n\n  ${defensiveAbilitiesImmunitiesBlock(tid)}\n  ${weaknessesBlock(tid)}\n\n  <p class=\"no_tb_margin\">\n      <b>Space</b> {{!!npc_space}}; <b>Reach</b> {{!!npc_reach}}\n  </p>\n\n      <p class=\"no_tb_margin section_underline\">\n      <b>SPECIAL ABILITIES</b>\n  </p>    \n        \n\n  */\n\n};\n\n})();\n","created":"20200901181119396","type":"application/javascript","tags":"","modified":"20200901182155203","module-type":"macro"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/trap-display.js":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/commands/trap-display.js","text":"/*\\\ncreated: 20200901181119396\ntype: application/javascript\ntitle: $:/plugins/huntsfromshadow/SF_RPG_Manager/commands/trap-display.js\ntags: \nmodified: 20200901182155203\nmodule-type: macro\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/* Tells TiddlyWiki the name of our macro through the export mechanism. */\nexports.name = \"trap-display\";\n\n/* Lists of macro parameters; leave this array empty if you need none, or\n * want all supplied macro call parameters to be passed to the run() method.\n */\nexports.params = [  ];\n\nvar npcDebugTxt = \"DEBUG NOPE\";\nvar sectionUnderlineColor = \"Black\";\n\nfunction txtOrEmpty(field, txt) {\n  if (field != npcDebugTxt) {\n    return txt;\n  }\n  else {\n    return \"\";\n  }\n}\n\n//Format of datalist\n//[ field name, ...]\nfunction singleLineNoHeaders(tid, datalist) {\n  var retval = \"\";\n  datalist.forEach(ele => {\n    var fname = ele;\n\n    if(tid.fields[ele] != npcDebugTxt) {\n      retval = retval + \"{{!!\" + ele + \"}} \";\n    }\n  });\n\n  if(retval != \"\") {\n    retval = '<p class=\"no_tb_margin\">' + retval + \"</p>\";\n  }\n\n  return retval;\n}\n\n//Format of datalist\n/* [\n[ fieldname, header, post ]\n]*/\nfunction singleLineWithHeaders(tid, datalist, hang=false) {\n\n  console.log(tid);\n  console.log(datalist);\n\n  var retval = \"\";\n\n  datalist.forEach(ele => {\n    var fieldname = ele[0];\n    var header = ele[1];\n    var post = ele[2];\n  \n    if( (tid.fields[fieldname] != npcDebugTxt)\n        && (tid.fields[fieldname] != \"\") ) {\n      retval = retval + \" \" + header + \"{{!!\" + \n        fieldname + \"}}\" + post;\n    }\n  });\n  \n  if(retval != \"\") {\n    if(hang == false) {\n      retval = '<p class=\"no_tb_margin\">' + retval + \"</p>\";\n    }\n    else {\n      retval = '<p class=\"no_tb_margin hang_indent\">' + retval + \"</p>\";      \n    }\n  }\n\n  return retval;\n}\n\n/* Executes (runs) our macro when it requires evaluation; returns a string\n * value.\n */\nexports.run = function() {\n  tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor\");\n  if(tid === undefined) {    \n    sectionUnderlineColor = \"Black\";\n  }\n  else {\n    sectionUnderlineColor = tid.fields.text;\n  }\n\n  var tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport\");\n      \n  var tid = this.wiki.getTiddler(\n      this.getVariable(\"currentTiddler\") );\n  \n  console.log(tid);\n\n  var outval = `\n<div id='sf_character'>\n  \n  <p class=\"no_tb_margin\" id=\"name_cr_row\">\n    <span>{{!!trap_name}}</span> \n    <span id=\"cr\">CR {{!!trap_cr}}</span>\n  </p>\n  ${singleLineWithHeaders(tid, [[\"trap_xp\", \"<b>XP \", \"</b>\"]])}  \n  ${singleLineWithHeaders(tid, [\n    [\"trap_type\", \"<b>Type</b> \", \";\"],\n    [\"trap_perception\", \"<b>Perception</b> \", \";\"],\n    [\"trap_disable\", \"<b>Disable</b> \", \";\"],\n  ], true)}  \n  ${singleLineWithHeaders(tid, [\n    [\"trap_trigger\", \"<b>Trigger</b> \", \";\"],\n    [\"trap_reset\", \"<b>Reset</b> \", \";\"],    \n  ])}    \n  ${singleLineWithHeaders(tid, [\n    [\"trap_effect\", \"<b>Effect</b> \", \"\"]], true)} \n  <br />  \n    ${singleLineWithHeaders(tid, [\n      [\"trap_source\", \"<b>Source</b> \", \"\"] ], true)}        \n</div>`;\n\n  return outval;\n\n  //Hold some data\n  //<p class=\"no_tb_margin\">\n  //    <b>Ranged</b> {{!!npc_ranged}}\n  //</p>\n  /*\n\n  <p class=\"no_tb_margin\">\n    <b>XP {{!!npc_xp}}</b>\n  </p>\n\n  ${defensiveAbilitiesImmunitiesBlock(tid)}\n  ${weaknessesBlock(tid)}\n\n  <p class=\"no_tb_margin\">\n      <b>Space</b> {{!!npc_space}}; <b>Reach</b> {{!!npc_reach}}\n  </p>\n\n      <p class=\"no_tb_margin section_underline\">\n      <b>SPECIAL ABILITIES</b>\n  </p>    \n        \n\n  */\n\n};\n\n})();\n","created":"20200901181119396","type":"application/javascript","tags":"","modified":"20200901182155203","module-type":"macro"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport","created":"20200904201601450","modified":"20200904204837039","type":"text/vnd.tiddlywiki","text":"false"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor","created":"20200905152630122","modified":"20200906000050163","type":"text/vnd.tiddlywiki","text":"Black"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/history":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/history","created":"20200831202408656","modified":"20200907151807236","tags":"","type":"text/vnd.tiddlywiki","text":"* ''1.0.0'' -- Initial version of Starfinder RPG Manager\n* ''1.0.4'' -- (9/7/2020) Release to public"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/icon":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/icon","created":"20200907144239647","modified":"20200907145017568","tags":"","type":"text/vnd.tiddlywiki","text":"<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"rocket\" class=\"svg-inline--fa fa-rocket fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" width=\"20pt\" height=\"20pt\"><path fill=\"currentColor\" d=\"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z\"></path></svg>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportNPC-SVG":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportNPC-SVG","created":"20200905012812638","modified":"20200905012858829","tags":"","type":"text/vnd.tiddlywiki","text":"<!--\n  user-plus-solid icon from FontAwesome\n  Licensed under Creative Commons Attribution 4.0 International\n  https://fontawesome.com/license\n\n  Modified by setting TiddlyWiki classes, height, and width.\n-->\n<!-- Grabbed from https://github.com/benwebber/tiddlywiki-dnd -->\n<svg aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"user-plus\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\" class=\"tc-image-new-image-button tc-image-button\" width=\"22pt\" height=\"22pt\"><path fill=\"currentColor\" d=\"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"></path></svg>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportTrap-SVG":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportTrap-SVG","created":"20200907123112152","modified":"20200907123718190","tags":"","type":"text/vnd.tiddlywiki","text":"<!--\n  user-plus-solid icon from FontAwesome\n  Licensed under Creative Commons Attribution 4.0 International\n  https://fontawesome.com/license\n\n  Modified by setting TiddlyWiki classes, height, and width.\n-->\n<!-- Grabbed from https://github.com/benwebber/tiddlywiki-dnd -->\n<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"skull-crossbones\" class=\"svg-inline--fa fa-skull-crossbones fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" width=\"12pt\" height=\"12pt\"><path fill=\"currentColor\" d=\"M439.15 453.06L297.17 384l141.99-69.06c7.9-3.95 11.11-13.56 7.15-21.46L432 264.85c-3.95-7.9-13.56-11.11-21.47-7.16L224 348.41 37.47 257.69c-7.9-3.95-17.51-.75-21.47 7.16L1.69 293.48c-3.95 7.9-.75 17.51 7.15 21.46L150.83 384 8.85 453.06c-7.9 3.95-11.11 13.56-7.15 21.47l14.31 28.63c3.95 7.9 13.56 11.11 21.47 7.15L224 419.59l186.53 90.72c7.9 3.95 17.51.75 21.47-7.15l14.31-28.63c3.95-7.91.74-17.52-7.16-21.47zM150 237.28l-5.48 25.87c-2.67 12.62 5.42 24.85 16.45 24.85h126.08c11.03 0 19.12-12.23 16.45-24.85l-5.5-25.87c41.78-22.41 70-62.75 70-109.28C368 57.31 303.53 0 224 0S80 57.31 80 128c0 46.53 28.22 86.87 70 109.28zM280 112c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32zm-112 0c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32z\"></path></svg>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/license":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/license","created":"20200831202408657","modified":"20200907151704896","tags":"","type":"text/vnd.tiddlywiki","text":"! Starfinder \nThis Plugin uses trademarks and/or copyrights owned by [[Paizo Inc.|http://www.paizo.com]], used under Paizo's Community Use Policy ([[paizo.com/communityuse|http://paizo.com/communityuse]]). We are expressly prohibited from charging you to use or access this content. This Plugin is not published, endorsed, or specifically approved by Paizo. For more information about Paizo Inc. and Paizo products, visit paizo.com.\n\n! MIT License \nCopyright 2020 huntsfromshadow\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/settings":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/settings","caption":"SF_RPG_Manager","created":"20200831203314734","modified":"20200905150017722","tags":"$:/tags/ControlPanel","type":"text/vnd.tiddlywiki","text":"\\define render-boolean(key default)\n<$checkbox tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/$key$\" field=\"text\" checked=\"true\" unchecked=\"false\" default=\"$default$\" />\n\\end\n\n\\define edit-setting(key)\n<$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/$key$\" field=\"text\" tag=\"input\" />\n\\end\n\n|Version |{{$:/plugins/huntsfromshadow/SF_RPG_Manager!!version}} |\n\n<table>\n<tr>\n    <td>DEBUG - Import empty field as 'DEBUG NOPE'</td>\n    <td>\n        <<render-boolean \"DebugEmptyImport\" false>></td>\n</tr>\n<tr>\n    <td>Statblock Section Underline Color</td>\n    <td>\n        <$edit-text \n            tiddler='$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor' \n            tag='input' placeholder='(unset)' default='Black'/>\n        <$reveal type=\"nomatch\" state=\"$:/state/SF_RPG_Manager_ColorSettingReveal\" \n            text=\"show\">\n            <$button set=\"$:/state/SF_RPG_Manager_ColorSettingReveal\" \n                setTo=\"show\">Pick Color</$button>\n        </$reveal>\n        <$reveal type=\"match\" \n            state=\"$:/state/SF_RPG_Manager_ColorSettingReveal\" text=\"show\">\n            <$button set=\"$:/state/SF_RPG_Manager_ColorSettingReveal\" \n                setTo=\"hide\">Hide Picker</$button>\n        </$reveal>\n    </td>\n</tr>\n</table>\n<$reveal type=\"match\" \n    state=\"$:/state/SF_RPG_Manager_ColorSettingReveal\" text=\"show\">\n    <$macrocall $name='colour-picker' actions=\"<$action-setfield $tiddler='$:/plugins/huntsfromshadow/SF_RPG_Manager/config/StarblockSectionUnderlineColor' $value=<<colour-picker-value>>/>\"/>\n</$reveal>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/states/npcimport_show_fields":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/states/npcimport_show_fields","created":"20200901124621866","modified":"20200901131545603","tags":"","type":"text/vnd.tiddlywiki","text":"show"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/states/npcimport_step1":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/states/npcimport_step1","created":"20200901140513718","modified":"20200901140519315","type":"text/vnd.tiddlywiki","text":"hide"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/styles/StarfinderCSS.css":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/styles/StarfinderCSS.css","created":"20200831202928621","modified":"20200905143845732","tags":"$:/tags/Stylesheet","type":"text/css","text":"#sf_character {    \n    max-width: 80%;\n}\n\n#sf_character .no_tb_margin {\n    margin-top: 0px;\n    margin-bottom: 0px;\n}\n\n#sf_character .hang_indent {\n    margin-left: 1em;\n    text-indent: -1em;\n}\n\n#sf_character .section_underline {    \n    border-bottom-style: solid;\n    border-bottom-width: 1px;\n}\n\n#sf_character #name_cr_row {\n    font-size: x-large;\n    font-weight: bold;\n    background-color: black;\n    color: white;\n    padding-top: 5px;\n    padding-bottom: 5px;\n}\n\n#sf_character #name_cr_row #cr {\n    float: right;\n}\n\n#sf_character #defense_hp_row #hp {\n    float: right;\n}\n\n.wide_editor {\nwidth:460px; \n}\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/NPCTemplate":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/NPCTemplate","created":"20200831203106349","modified":"20200905005116266","tags":"","type":"text/vnd.tiddlywiki","text":"<<npc-display>>\n\n<$button>\n<$action-sendmessage $message=\"tm-modal\" $param=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/NPCEditor\" npc=<<currentTiddler>> />\nEdit {{!!title}} \n</$button>\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/TrapTemplate":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/TrapTemplate","created":"20200907000230346","modified":"20200907001115438","tags":"","type":"text/vnd.tiddlywiki","text":"<<trap-display>>\n\n<$button>\n<$action-sendmessage \n    $message=\"tm-modal\" \n    $param=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/TrapEditor/TrapEditor\" \n    trap=<<currentTiddler>> />\nEdit {{!!title}} \n</$button>\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportNPC":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportNPC","created":"20200905012335344","description":"Import NPC","modified":"20200905014052446","tags":"$:/tags/PageControls","type":"text/vnd.tiddlywiki","text":"\\define actions()\n<$action-navigate $to=\"SF - Import NPC\" />\n\\end\n\n<$wikify name=\"text\" text=\"Import NPC\">\n<$wikify name=\"title\" text=\"Import NPC\">\n<$wikify name=\"tooltip\" text=\"Import NPC\">\n<$button actions=<<actions>> class=<<tv-config-toolbar-class>> tooltip=<<tooltip>>>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportNPC-SVG}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text=<<text>>/></span>\n</$list>\n</$button>\n</$wikify>\n</$wikify>\n</$wikify>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportTrap":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/Buttons/ImportTrap","created":"20200907122317523","description":"Import NPC","modified":"20200907123522065","tags":"$:/tags/PageControls","type":"text/vnd.tiddlywiki","text":"\\define actions()\n<$action-navigate $to=\"SF - Import Trap\" />\n\\end\n\n<$wikify name=\"text\" text=\"Import Trap\">\n<$wikify name=\"title\" text=\"Import Trap\">\n<$wikify name=\"tooltip\" text=\"Import Trap\">\n<$button actions=<<actions>> class=<<tv-config-toolbar-class>> tooltip=<<tooltip>>>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/plugins/huntsfromshadow/SF_RPG_Manager/images/ImportTrap-SVG}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text=<<text>>/></span>\n</$list>\n</$button>\n</$wikify>\n</$wikify>\n</$wikify>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 1":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 1","caption":"Step 1","created":"20200903191157492","modified":"20200907150247011","tags":"","tmpname":"New NPC","type":"text/vnd.tiddlywiki","text":"<$button>\n    <$action-createtiddler \n        $basetitle=\"New NPC\"\n        $savetitle=\"!!tmpname\"\t\t\t\t\n        text=\"{{||$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/NPCTemplate}}\"\n\t\t\t\ttags=\"NPC\" />\n    <$action-navigate $to={{!!tmpname}} />\n    Create Empty NPC\n</$button>\n\nor\n\n''Step 1:'' \n\n__Fill In Below__\n<table>\n<tr>\n<td>\nNPC (Tiddler) Name:</td>\n<td><$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportName\"  placeholder=\"NPC Tiddler Name\" size=\"30\" tag=\"input\" /></td>\n</tr>\n<tr>\n<td>Plain Text Statblock:</td>\n<td><$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportRawBlock\"  tag=\"textarea\"   class=\"wide_editor\" /></td></tr>\n</table>\n\n<<nextstep>>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 2":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 2","caption":"Step 2","created":"20200903191344202","modified":"20200907124853905","tags":"","type":"text/vnd.tiddlywiki","text":"\\define act-create-staging() \n<$action-createtiddler $basetitle=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht\" $overwrite=\"yes\" />\n\\end\n\n\\define act-load-npc() \n<$action-sf-rawtext-trap-import \n  $npcname={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportName}} $rawblock={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportRawBlock}} $fieldtarget=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht\" \n  />\n\\end\n\n\\define edit-field(npcfld size) \n<$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht\" field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define multi-edit-field(npcfld size) \n<$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht\" field=$npcfld$ size=\"$size$\" class=\"wide_editor\" tag=textarea/>\n\\end\n\n\\define multitablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<multi-edit-field $field$ $size$ >></td></tr>\n\\end\n\n\n\n''Step 2:'' \n\n<$button actions=\"<<act-create-staging>> <<act-load-npc>>\" >\n  Load into Fields Below to Double Check\n</$button>\n\n<table>\n<<tablerow Name npc_name 30>>\n<<tablerow CR npc_cr 30>>\n<<tablerow XP npc_xp 30>>\n<<tablerow Gender npc_gender 30>>\n<<tablerow Race\tnpc_race 30>>\n<<tablerow Class/Graft npc_graftclass 30>>\n<<tablerow Alignment npc_alignment 30>>\n<<tablerow Size\tnpc_size 30>>\n<<tablerow Type\tnpc_type 30>>\n<<tablerow Subtype npc_subtype 30>>\n<<tablerow Init\tnpc_init 30>>\n<<tablerow Senses npc_senses 30>>\n<<tablerow Perception npc_perception 30>>\n<<tablerow Aura\tnpc_aura 30>>\n<<tablerow HP npc_hp 30>>\n<<tablerow RP npc_rp 30>>\n<<tablerow EAC npc_eac 30>>\n<<tablerow KAC npc_kac 30>>\n<<tablerow Fort\tnpc_fort 30>>\n<<tablerow Ref npc_ref 30>>\n<<tablerow Will\tnpc_will 30>>\n<<tablerow \"Defensive Abilities\" npc_defensive_abilities 30>>\n<<tablerow DR npc_dr 30>>\n<<tablerow Immunities npc_immunities 30>>\n<<tablerow SR npc_sr 30>>\n<<tablerow Weaknesses npc_weaknesses 30>>\n<<tablerow Speed npc_speed 30>>\n<<multitablerow Melee npc_melee 50>>\n<<multitablerow Ranged npc_ranged 50>>\n<<tablerow Multiattack\tnpc_multiattack 50>>\n<<tablerow \"Offensive Abilities\"\tnpc_offensive_abilities 50>>\n<<tablerow Space npc_space 30>>\n<<tablerow Reach npc_reach 30>>\n<<multitablerow \"SLA (Seperate Lines with &#124; Symbol)\"\tnpc_sla 50>>\n<<tablerow Str npc_str 30>>\n<<tablerow Dex npc_dex 30>>\n<<tablerow Con npc_con 30>>\n<<tablerow Int npc_int 30>>\n<<tablerow Wis\tnpc_wis 30>>\n<<tablerow Cha\tnpc_cha 30>>\n<<tablerow Skills\tnpc_skills 50>>\n<<tablerow Feats\tnpc_feats 30>>\n<<tablerow Languages\tnpc_languages 50>>\n<<multitablerow \"Other Abilities\"\tnpc_other_abilities 50>>\n<<multitablerow Gear\tnpc_gear 30>>\n<<multitablerow \"Special Abilities (Seperate Lines with &#124; Symbol)\"\tnpc_special_abilities 30>>\n</table>\n\n''Fields not importable from Statblock''\n<table>\n<<tablerow \"From Source\" npc_source 30>>\n</table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 3":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 3","caption":"Step 3","created":"20200903191838246","modified":"20200907150257211","tags":"","type":"text/vnd.tiddlywiki","text":"''Step 3:''\n\n<$button>\n    <$action-createtiddler \n        $basetitle={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportName}}\n        $savetitle=\"!!tmpname\"\n\t\t\t\t$template=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht\"\n        text=\"{{||$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/NPCTemplate}}\"\n\t\t\t\ttags=\"NPC\"\n\t\t\t\t$overwrite=\"yes\" />\n    <$action-navigate $to={{!!tmpname}} />\n    Import NPC\n</$button>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/SF - Import NPC":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/SF - Import NPC","created":"20200903191112916","modified":"20200907150551346","tags":"","tmpname":"Loggerbots","type":"text/vnd.tiddlywiki","text":"!Import Starfinder NPC\n\n!!Overview\nImport a starfinder NPC from a copy and paste stat block.\nNote this will try to do it's best but you'll need to double check the fields.\n\n<<tabs \"[[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 1]] [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 2]] [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 3]]\" [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportNPC/Import NPC - Step 1]] \"$:/state/sf_rpg_man_importnpc_tab\">>\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 1":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 1","caption":"Step 1","created":"20200906230957518","modified":"20200907150132816","tags":"","tmpname":"New NPC","type":"text/vnd.tiddlywiki","text":"<$button>\n    <$action-createtiddler \n        $basetitle=\"New Trap\"\n        $savetitle=\"!!tmpname\"\t\t\t\t\n        text=\"{{||$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/TrapTemplate}}\" tags=\"Trap\" />\n    <$action-navigate $to={{!!tmpname}} />\n    Create Empty Trap\n</$button>\n\nor\n\n''Step 1:'' \n\n__Fill In Below__\n<table>\n<tr>\n<td>\nTrap (Tiddler) Name:</td>\n<td><$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportName\"  placeholder=\"NPC Trap Name\" size=\"30\" tag=\"input\" /></td>\n</tr>\n<tr>\n<td>Plain Text Statblock:</td>\n<td><$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportRawBlock\"  tag=\"textarea\"   class=\"wide_editor\" /></td></tr>\n</table>\n\n<<nextstep>>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 2":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 2","caption":"Step 2","created":"20200906231022836","modified":"20200907142937941","tags":"","type":"text/vnd.tiddlywiki","text":"\\define act-create-staging() \n<$action-createtiddler $basetitle=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht\" $overwrite=\"yes\" />\n\\end\n\n\\define act-load-npc() \n<$action-sf-rawtext-trap-import \n  $npcname={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportName}} $rawblock={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportRawBlock}} $fieldtarget=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht\" \n  />\n\\end\n\n\\define edit-field(npcfld size) \n<$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht\" field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define multi-edit-field(npcfld size) \n<$edit-text tiddler=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht\" field=$npcfld$ size=\"$size$\" class=\"wide_editor\" tag=textarea/>\n\\end\n\n\\define multitablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<multi-edit-field $field$ $size$ >></td></tr>\n\\end\n\n\n\n''Step 2:'' \n\n<$button actions=\"<<act-create-staging>> <<act-load-npc>>\" >\n  Load into Fields Below to Double Check\n</$button>\n\n<table>\n<<tablerow Name trap_name 30>>\n<<tablerow CR trap_cr 30>>\n<<tablerow XP trap_xp 30>>\n<<tablerow Type trap_type 30>>\n<<tablerow Perception trap_perception 30>>\n<<tablerow Disable trap_disable 30>>\n<<tablerow Trigger trap_trigger 30>>\n<<tablerow Reset trap_reset 30>>\n<<multitablerow Effect trap_effect 30>>\n</table>\n\n''Fields not importable from Statblock''\n<table>\n<<tablerow \"From Source\" trap_source 30>>\n</table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 3":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 3","caption":"Step 3","created":"20200906231048986","modified":"20200907150657575","tags":"","type":"text/vnd.tiddlywiki","text":"''Step 3:''\n\n<$button>\n    <$action-createtiddler \n        $basetitle={{$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportName}}\n        $savetitle=\"!!tmpname\"\n\t\t\t\t$template=\"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht\"\n        text=\"{{||$:/plugins/huntsfromshadow/SF_RPG_Manager/templates/TrapTemplate}}\"\n\t\t\t\ttags=\"Trap\"\n\t\t\t\t$overwrite=\"yes\" />\n    <$action-navigate $to={{!!tmpname}} />\n    Import Trap\n</$button>\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/SF - Import Trap":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/SF - Import Trap","created":"20200907145436293","modified":"20200907150826228","tags":"","tmpname":"Pit Trap","type":"text/vnd.tiddlywiki","text":"!Import Starfinder Trap\n\n!!Overview\nImport a starfinder Trap from a copy and paste stat block.\nNote this will try to do it's best but you'll need to double check the fields.\n\n<<tabs \"[[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 1]] [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 2]] [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 3]]\" [[$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/ImportTrap/Import Trap - Step 1]] \"$:/state/sf_rpg_man_importtrap_tab\">>\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorDefenseTab":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorDefenseTab","caption":"Defense","created":"20200904222523712","modified":"20200905005505009","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n!Defense\n<table>\n<<tablerow HP npc_hp 30>>\n<<tablerow RP npc_rp 30>>\n<<tablerow EAC npc_eac 30>>\n<<tablerow KAC npc_kac 30>>\n<<tablerow Fort\tnpc_fort 30>>\n<<tablerow Ref npc_ref 30>>\n<<tablerow Will\tnpc_will 30>>\n<<tablerow \"Defensive Abilities\" npc_defensive_abilities 30>>\n<<tablerow DR npc_dr 30>>\n<<tablerow Immunities npc_immunities 30>>\n<<tablerow SR npc_sr 30>>\n<<tablerow Weaknesses npc_weaknesses 30>>\n\n</table>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorIdentityTab":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorIdentityTab","caption":"Identity","created":"20200904215055120","modified":"20200905005507299","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n!Identity Block \n\n<table>\n<<tablerow Name npc_name 30>>\n<<tablerow CR npc_cr 30>>\n<<tablerow XP npc_xp 30>>\n<<tablerow Gender npc_gender 30>>\n<<tablerow Race\tnpc_race 30>>\n<<tablerow Class/Graft npc_graftclass 30>>\n<<tablerow Alignment npc_alignment 30>>\n<<tablerow Size\tnpc_size 30>>\n<<tablerow Type\tnpc_type 30>>\n<<tablerow Subtype npc_subtype 30>>\n<<tablerow Init\tnpc_init 30>>\n<<tablerow Senses npc_senses 30>>\n<<tablerow Perception npc_perception 30>>\n<<tablerow Aura\tnpc_aura 30>>\n</table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorOffenseTab":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorOffenseTab","caption":"Offense","created":"20200904222613146","modified":"20200905005630390","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define edit-field-multi(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\" tag=textarea class=\"wide_editor\" />\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define multirow(fldname field)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field-multi $field$ $size$ >></td></tr>\n\\end\n\n!Statistics\n<table>\n<<tablerow Speed npc_speed 30>>\n<<multirow Melee npc_melee 50>>\n<<multirow Ranged npc_ranged 50>>\n<<tablerow Multiattack npc_multiattack 50>>\n<<tablerow \"Offensive Abilities\" npc_offensive_abilities 50>>\n<<tablerow Space npc_space 30>>\n<<tablerow Reach npc_reach 30>>\n<<multirow \"SLA (Seperate Lines with &#124; Symbol)\" npc_sla 50>>\n</table>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorSpecialAbilitiesTab":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorSpecialAbilitiesTab","caption":"Special Abilities and Source","created":"20200904222923483","modified":"20200905005656450","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define edit-field-multi(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\" tag=textarea class=\"wide_editor\" />\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define multirow(fldname field)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field-multi $field$ $size$ >></td></tr>\n\\end\n\n!Special Abilities\n<table>\n<<multirow \"Special Abilities (Seperate Lines with &#124; Symbol)\"\tnpc_special_abilities 30>>\n<<tablerow \"From Source\" npc_source 30>>\n</table>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorStatisticsTab":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorStatisticsTab","caption":"Statistics","created":"20200904233525836","modified":"20200905005720820","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\"/>\n\\end\n\n\\define edit-field-multi(npcfld size) \n<$edit-text tiddler=<<npc>> field=$npcfld$ size=\"$size$\" tag=textarea class=\"wide_editor\" />\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define multirow(fldname field)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field-multi $field$ $size$ >></td></tr>\n\\end\n\n<table>\n<<tablerow Str npc_str 30>>\n<<tablerow Dex npc_dex 30>>\n<<tablerow Con npc_con 30>>\n<<tablerow Int npc_int 30>>\n<<tablerow Wis\tnpc_wis 30>>\n<<tablerow Cha\tnpc_cha 30>>\n<<tablerow Skills\tnpc_skills 50>>\n<<tablerow Feats\tnpc_feats 30>>\n<<tablerow Languages\tnpc_languages 50>>\n<<multirow \"Other Abilities\"\tnpc_other_abilities 50>>\n<<multirow Gear\tnpc_gear 30>>\n</table>"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/NPCEditor":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/NPCEditor","created":"20200904214316545","modified":"20200905011440509","subtitle":"NPC Editor","tags":"","type":"text/vnd.tiddlywiki","text":"!NPC Editor\nNote Edits are Automatically saved.\n<<tabs \n\"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorIdentityTab $:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorDefenseTab $:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorOffenseTab \n$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorStatisticsTab $:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorSpecialAbilitiesTab\" \n\"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/NPCEditor/EditorIdentityTab\" \n\"$:/state/npceditortab\" \n\"tc-vertical\"\n>>\n\n\n\n\n\n\n\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/TrapEditor/TrapEditor":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/ui/TrapEditor/TrapEditor","created":"20200907001543009","modified":"20200907001725924","subtitle":"NPC Editor","tags":"","type":"text/vnd.tiddlywiki","text":"\\define edit-field(trapfld size) \n<$edit-text tiddler=<<trap>> field=$trapfld$ size=\"$size$\"/>\n\\end\n\n\\define tablerow(fldname field size)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field $field$ $size$ >></td></tr>\n\\end\n\n\\define edit-field-multi(trapfld size) \n<$edit-text tiddler=<<trap>> field=$trapfld$ size=\"$size$\" tag=textarea class=\"wide_editor\" />\n\\end\n\n\\define multirow(fldname field)\n<tr><td width=\"40%\"><b>$fldname$</b></td><td><<edit-field-multi $field$ $size$ >></td></tr>\n\\end\n\n\n!Trap Editor\nNote Edits are Automatically saved.\n\n<table>\n<<tablerow Name trap_name 30>>\n<<tablerow CR trap_cr 30>>\n<<tablerow XP trap_xp 30>>\n<<tablerow Type trap_type 30>>\n<<tablerow Perception trap_perception 30>>\n<<tablerow Disable trap_disable 30>>\n<<tablerow Trigger trap_trigger 30>>\n<<tablerow Reset trap_reset 30>>\n<<multirow Effect trap_effect 30>>\n<<tablerow \"From Source\" trap_source 30>>\n</table>\n\n\n\n\n\n\n"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportName":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportName","created":"20200902155612646","modified":"20200907154811035","type":"text/vnd.tiddlywiki","text":""},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportRawBlock":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportRawBlock","created":"20200902155633863","modified":"20200907154814384","type":"text/vnd.tiddlywiki","text":""},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-NPCImportWrkSht","created":"20200907154822379","modified":"20200907154822395","trap_cr":"","trap_disable":"","trap_effect":"","trap_name":"","trap_perception":"","trap_reset":"","trap_trigger":"","trap_type":"","trap_xp":"","type":"text/vnd.tiddlywiki","text":""},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportName":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportName","created":"20200906231443020","modified":"20200907141451312","type":"text/vnd.tiddlywiki","text":"Pit Trap"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportRawBlock":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportRawBlock","created":"20200906231437540","modified":"20200907141447916","type":"text/vnd.tiddlywiki","text":"PIT TRAP CR 1/2\nXP 200\nType analog; Perception DC 17; Disable Engineering DC 12\n(open trap door) or DC 18 (jam trap door shut)\nTrigger location; Reset manual\nEffect 20-ft.-deep pit (2d6 falling damage); Reflex DC 11 avoids;\nmultiple targets (all targets in a 10-ft.-square area)"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/variables/Var-TrapImportWrkSht","created":"20200907142946966","modified":"20200907143018919","trap_cr":"1/2","trap_disable":"Engineering DC 12 (open trap door) or DC 18 (jam trap door shut)","trap_effect":"20-ft.-deep pit (2d6 falling damage); Reflex DC 11 avoids; multiple targets (all targets in a 10-ft.-square area)","trap_name":"PIT TRAP","trap_perception":"DC 17","trap_reset":"manual Effect 20-ft.-deep pit (2d6 falling damage)","trap_source":"Core Rulebook","trap_trigger":"location","trap_type":"analog","trap_xp":"200","type":"text/vnd.tiddlywiki","text":""},"$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-npc-import.js":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-npc-import.js","text":"/*\\\ncreated: 20200902162043469\ntitle: $:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-npc-import.js\ntype: application/javascript\nmodified: 20200902162100908\ntags: \nmodule-type: widget\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\n/* Creates a new <$foo> widget. */\nvar RawTextNPCImport = function(parseTreeNode, options) {\n  this.initialise(parseTreeNode, options);\n  this.loadKeywordList();\n};\n  \n/* \"Inherits\" from the Widget base \"class\" in order to get all\n * the basic widget functionality.\n */\nRawTextNPCImport.prototype = new Widget();\n\n/* Renders this widget into the DOM. */\nRawTextNPCImport.prototype.render = function(parent,nextSibling) {\n  this.computeAttributes();\n  this.execute();\n};\n\n/* Computes the internal state of this widget. */\nRawTextNPCImport.prototype.execute = function() {\n  this.npcname = this.getAttribute(\"$npcname\");\n  this.rawblock = this.getAttribute(\"$rawblock\");\n  this.fieldtarget = this.getAttribute(\"$fieldtarget\");\n};  \n  \n/* Selectively refreshes this widget if needed and returns\n * true if either this widget itself or one of its children\n * needs to be re-rendered.\n */\nRawTextNPCImport.prototype.refresh = function(changedTiddlers) {\n  var changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) > 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n  return this.refreshChildren(changedTiddlers);  \n};\n\nRawTextNPCImport.prototype.saveField = function(fieldName, fieldValue) {\n  if(fieldValue === undefined) {\n    fieldValue = this.emptyFieldText();\n  }  \n  this.wiki.setText(this.fieldtarget, fieldName, undefined, fieldValue.trim(), {});  \n};\n\nRawTextNPCImport.prototype.emptyFieldText = function() {\n  if(this.debugMode == true) {\n    return \"DEBUG NOPE\";\n  }\n  else {\n    return \"\";\n  }\n};\n\nRawTextNPCImport.prototype.handleGenderRaceGraft = function(rb) {\n\n  //Get just that line\n  var ex = /XP [\\d,]*[ \\n](?:(.*)[ \\n])?(?:LG|NG|CG|LN|N|CN|LE|NE|CE)/.exec(rb);\n  //console.log(ex);\n\n  if(ex[1] === undefined) {\n    this.saveField(\"npc_gender\", this.emptyFieldText());\n    this.saveField(\"npc_race\", this.emptyFieldText());\n    this.saveField(\"npc_graftclass\", this.emptyFieldText());\n  }\n  else {\n    //As this is a very flexible line we are just going to split it.\n    var l = ex[1];\n    l = l.replace(\"\\n\", \"\");\n    l = l.split(\" \");\n    \n    this.saveField(\"npc_gender\", l[0]);\n    this.saveField(\"npc_race\", l[1]);\n    this.saveField(\"npc_graftclass\", l[2]);\n  }\n};\n\nRawTextNPCImport.prototype.handleTypeSubtype = function(rb) {\n  //Get the line\n  var ex = \n    /(?:LG|NG|CG|LN|N|CN|LE|NE|CE) (?:Fine|Diminutive|Tiny|Small|Medium|Large|Huge|Gargantuan|Colossal) (.*)/.exec(rb);\n  \n  var l = /(.*) (\\(.*\\))/.exec(ex[1]);  \n  this.saveField(\"npc_type\", l[1]);\n  this.saveField(\"npc_subtype\", l[2]);\n}\n\nRawTextNPCImport.prototype.extractKeywords = function(rb) {  \n  this.keyword_list.forEach(elem => {\n    var re = null;\n\n    re = new RegExp(elem[1], \"i\");\n    re = re.exec(rb);\n    \n    //console.log(\"---------\");\n    //console.log(re);\n\n    if( re == null )\n    {\n      var val = this.emptyFieldText();      \n    }\n    else {\n      var val = re[1];\n    }\n\n    //Do a \\n cleanup\n    val = val.replace(\"\\n\", \" \");\n\n    //console.log(elem[0]);\n    //console.log(val);\n\n    this.saveField(elem[0], val);\n  });\n};\n\nRawTextNPCImport.prototype.handleSLA = function(rb) {\n  var ex =\n    /Spell-Like Abilities (.*)STATISTICS/s.exec(rb);\n\n  if(ex == null) {\n    this.saveField(\"npc_sla\", this.emptyFieldText());   \n  }\n  else {    \n    var fullstr = ex[1];\n\n    var finalstr = \"\";\n\n    var c =\n      /(\\(.*\\))/.exec(fullstr);\n    var cl_block = null;\n    cl_block = c[1];\n    fullstr = fullstr.replace(cl_block, \"\");\n    fullstr = fullstr.trim();\n\n    finalstr = finalstr + cl_block;\n\n    c =\n      /(Constant—.*)/.exec(fullstr);\n    var con_line = null;\n    if(c != null) {\n      con_line = c[1];\n      fullstr = fullstr.replace(con_line, \"\");\n      fullstr = fullstr.trim();      \n    }\n  \n    c = \n      /(At will—.*)/.exec(fullstr);\n    var at_will_line = null;\n    if(c != null) {\n      at_will_line = c[1];\n      fullstr = fullstr.replace(at_will_line, \"\");\n      fullstr = fullstr.trim();\n    }\n\n    fullstr = fullstr.replace(\"\\n\", \"|\");\n    finalstr = finalstr + \"|\" + fullstr;\n\n    if(con_line != null) {\n      finalstr = finalstr + \"|\" + con_line;\n    }\n\n    if(at_will_line != null) {\n      finalstr = finalstr + \"|\" + at_will_line;\n    }\n    \n    this.saveField(\"npc_sla\", finalstr);\n  }\n};\n\nRawTextNPCImport.prototype.handleOtherAbilities = function(rb) {\n\n  var c = /Other Abilities (.*)Gear/s.exec(rb);\n\n  if(c != null) {\n    var othera = c[1];\n    othera = othera.replace(\"\\r\", \" \");\n    this.saveField(\"npc_other_abilities\", othera);\n  }\n};\n\nRawTextNPCImport.prototype.handleGear = function(rb) {\n  var c = /Gear (.*)ECOLOGY/s.exec(rb);\n\n  if(c != null) {\n    var othera = c[1];\n    othera = othera.replace(\"\\r\", \" \");\n    this.saveField(\"npc_gear\", othera);\n  }\n};\n\nRawTextNPCImport.prototype.handleSpecialAbilities = function(rb) {\n  var c = /SPECIAL ABILITIES(.*)/is.exec(rb);  \n  if(c != null) {\n    var s = c[1];\n    s = s.replace(\"\\n\", \" \");\n    this.saveField(\"npc_special_abilities\", s);\n  }\n  else {\n    this.saveField(\"npc_special_abilities\", this.emptyFieldText());\n  }\n};\n\n\nRawTextNPCImport.prototype.invokeAction = function(triggeringWidget,event) {\n  //First we need to grab the config to know if we are in Debug Mode\n  var tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport\");\n    \n  if(tid !== undefined && tid.fields.text == \"true\") {\n    this.debugMode = true;\n  }\n  else {\n    this.debugMode = false;\n  }\n\n  //Handle any data cleanup\n  var rb = this.rawblock.replace(\"−\", \"-\");\n  //var rb = this.rawblock.replace(\"—\", \"-\");\n\n  //First lets handle all the data that can be keword grabbed\n  this.extractKeywords(rb);\n  \n  //Now their are somethings that are way too complicated for keywords.\n  this.handleGenderRaceGraft(rb);\n  this.handleTypeSubtype(rb);\n  this.handleSLA(rb);\n  this.handleOtherAbilities(rb);\n  this.handleGear(rb);\n  this.handleSpecialAbilities(rb);\n\n  return true;\n};\n\nRawTextNPCImport.prototype.loadKeywordList = function() {  \n  this.keyword_list = [\n    //Identity Block\n    [\"npc_name\", \"(.*) CR (?:1\\\\/8|1\\\\/6|1\\\\/4|1\\\\/3|1\\\\/2|\\\\d{1,2})\"],\n    [\"npc_cr\", \".* CR (1\\\\/8|1\\\\/6|1\\\\/4|1\\\\/3|1\\\\/2|\\\\d{1,2})\"],\n    [\"npc_xp\", \"XP ([\\\\d,]*)\"],\n      //gender, race, graft will need to be in custom function\n    [\"npc_alignment\", \"\\\\b(LG|NG|CG|LN|N|CN|LE|NE|CE)\\\\b\"],\n    [\"npc_size\", \"\\\\b(Fine|Diminutive|Tiny|Small|Medium|Large|Huge|Gargantuan|Colossal)\\\\b\"],\n      //type and subtype will need to be in custom function      \n    [\"npc_init\", \"Init ([+|-]\\\\d{1,2});\"],\n    [\"npc_senses\", \"Senses ([^;]*);\"],\n    [\"npc_perception\", \"Perception ([+|-]\\\\d{1,2})\"],\n    [\"npc_aura\", \"Aura (.*)\"],\n\n    //Defense Block\n    [\"npc_hp\", \"HP (\\\\d{1,3})\"],\n    [\"npc_rp\", \"RP (\\\\d{1,2})\"],\n    [\"npc_eac\", \"EAC (\\\\d{1,2});\"],\n    [\"npc_kac\", \"KAC (\\\\d{1,2})\\n\"],\n    [\"npc_fort\", \"Fort ([+|-]\\\\d{1,2});\"],\n    [\"npc_ref\", \"Ref ([+|-]\\\\d{1,2});\"],\n    [\"npc_will\", \"Will[ \\\\n]?([^;\\\\n]*)\"],\n    [\"npc_defensive_abilities\", \"Defensive Abilities (.*);\"],\n    [\"npc_dr\", \"DR ([^;]*);\"],  \n    [\"npc_immunities\", \"Immunities[ |\\\\n]([^;]*?)(?:;|Weaknesses)\"],\n    [\"npc_sr\", \"\\\\bSR\\\\b (.*)\"],\n    [\"npc_weaknesses\", \"Weaknesses ((?:\\\\s|\\\\S)*)OFFENSE\"],\n\n    //Offense Block\n    [\"npc_speed\", \"Speed (.*)\\\\n\"],\n    [\"npc_melee\", \"Melee (.*)\\\\n\"],\n    [\"npc_multiattack\", \"Multiattack (.*)\\\\n\"],\n    [\"npc_ranged\", \"Ranged (.*)\"],\n    [\"npc_space\", \"Space (.*);\"],\n    [\"npc_reach\", \"Reach (.*)\\\\n\"],    \n    [\"npc_offensive_abilities\", \"Offensive Abilities (.*)\"],    \n      //SLAs have to be their own custom function\n\n    //Statistics Block\n    [\"npc_str\", \"Str ([+|-]\\\\d{1,2});\"],\n    [\"npc_dex\", \"Dex ([+|-]\\\\d{1,2});\"],\n    [\"npc_con\", \"Con ([^;]*);\"],\n    [\"npc_int\", \"Int ([+|-]\\\\d{1,2});\"],\n    [\"npc_wis\", \"Wis ([+|-]\\\\d{1,2});\"],\n    [\"npc_cha\", \"Cha ([+|-]\\\\d{1,2})\"],\n    [\"npc_skills\", \"Skills ((?:.|\\n)*)Languages\"],\n    [\"npc_feats\", \"Feats (.*)\"],\n    [\"npc_languages\", \"Languages (.*)\\\\n\"],\n    [\"npc_other_abilities\", \"Other Abilities (.*)[ \\n](?:Special Abilities|Gear|ECOLOGY|TACTICS)\"],\n    [\"npc_gear\", \"Gear(.*)\"],\n\n    //Ecology Block\n    [\"npc_enviornment\", \"Environment (.*)\\\\n\"],\n    [\"npc_organization\", \"Organization (.*)\\\\n\"],\n\n    //Special Abilities Block is it's own breakout\n  ];\n}\n\n\n\n/* Finally exports the widget constructor. */\nexports[\"action-sf-rawtext-npc-import\"] = RawTextNPCImport;\n\n})();","created":"20200902162043469","type":"application/javascript","modified":"20200902162100908","tags":"","module-type":"widget"},"$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-trap-import.js":{"title":"$:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-trap-import.js","text":"/*\\\ncreated: 20200902162043469\ntitle: $:/plugins/huntsfromshadow/SF_RPG_Manager/widgets/action-rawtext-trap-import.js\ntype: application/javascript\nmodified: 20200902162100908\ntags: \nmodule-type: widget\n\\*/\n(function(){\n\n  /*jslint node: true, browser: true */\n  /*global $tw: false */\n  \"use strict\";\n  \n  var Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n  \n  /* Creates a new <$foo> widget. */\n  var RawTextTrapImport = function(parseTreeNode, options) {\n    this.initialise(parseTreeNode, options);\n    this.loadKeywordList();\n  };\n    \n  /* \"Inherits\" from the Widget base \"class\" in order to get all\n   * the basic widget functionality.\n   */\n  RawTextTrapImport.prototype = new Widget();\n  \n  /* Renders this widget into the DOM. */\n  RawTextTrapImport.prototype.render = function(parent,nextSibling) {\n    this.computeAttributes();\n    this.execute();\n  };\n  \n  /* Computes the internal state of this widget. */\n  RawTextTrapImport.prototype.execute = function() {\n    this.trapname = this.getAttribute(\"$trapname\");\n    this.rawblock = this.getAttribute(\"$rawblock\");\n    this.fieldtarget = this.getAttribute(\"$fieldtarget\");\n  };  \n    \n  /* Selectively refreshes this widget if needed and returns\n   * true if either this widget itself or one of its children\n   * needs to be re-rendered.\n   */\n  RawTextTrapImport.prototype.refresh = function(changedTiddlers) {\n    var changedAttributes = this.computeAttributes();\n    if($tw.utils.count(changedAttributes) > 0) {\n      this.refreshSelf();\n      return true;\n    }\n    return this.refreshChildren(changedTiddlers);  \n  };\n  \n  RawTextTrapImport.prototype.saveField = function(fieldName, fieldValue) {\n    if(fieldValue === undefined) {\n      fieldValue = this.emptyFieldText();\n    }  \n    this.wiki.setText(this.fieldtarget, fieldName, undefined, fieldValue.trim(), {});  \n  };\n  \n  RawTextTrapImport.prototype.emptyFieldText = function() {\n    if(this.debugMode == true) {\n      return \"DEBUG NOPE\";\n    }\n    else {\n      return \"\";\n    }\n  };\n    \n  RawTextTrapImport.prototype.extractKeywords = function(rb) {  \n    this.keyword_list.forEach(elem => {\n      var re = null;\n  \n      re = new RegExp(elem[1], \"i\");\n      re = re.exec(rb);\n      \n      //console.log(\"---------\");\n      //console.log(re);\n  \n      if( re == null )\n      {\n        var val = this.emptyFieldText();      \n      }\n      else {\n        var val = re[1];\n      }\n  \n      //Do a \\n cleanup\n      val = val.replace(\"\\n\", \" \");\n  \n      //console.log(elem[0]);\n      //console.log(val);\n  \n      this.saveField(elem[0], val);\n    });\n  };  \n  \n  RawTextTrapImport.prototype.invokeAction = function(triggeringWidget,event) {\n    //First we need to grab the config to know if we are in Debug Mode\n    var tid = this.wiki.getTiddler(\"$:/plugins/huntsfromshadow/SF_RPG_Manager/config/DebugEmptyImport\");\n      \n    if(tid !== undefined && tid.fields.text == \"true\") {\n      this.debugMode = true;\n    }\n    else {\n      this.debugMode = false;\n    }\n  \n    //Handle any data cleanup\n    var rb = this.rawblock.replace(\"−\", \"-\");\n    //var rb = this.rawblock.replace(\"—\", \"-\");\n  \n    //First lets handle all the data that can be keword grabbed\n    this.extractKeywords(rb);\n        \n    return true;\n  };\n  \n  RawTextTrapImport.prototype.loadKeywordList = function() {  \n    this.keyword_list = [\n      [\"trap_name\", \"(.*) CR (?:1\\\\/8|1\\\\/6|1\\\\/4|1\\\\/3|1\\\\/2|\\\\d{1,2})\"],      \n      [\"trap_cr\", \".* CR (1\\\\/8|1\\\\/6|1\\\\/4|1\\\\/3|1\\\\/2|\\\\d{1,2})\"],\n      [\"trap_xp\", \"XP ([\\\\d,]*)\"],\n      [\"trap_type\", \"Type ([^;]*);\"],\n      [\"trap_perception\", \"Perception ([^;]*);\"],\n      [\"trap_disable\", \"Disable ([^;]*);?Trigger\"],\n      [\"trap_trigger\", \"Trigger ([^;]*);\"],\n      [\"trap_reset\", \"Reset ([^;]*);\"],\n      [\"trap_effect\", \"Effect ([\\\\s|\\\\S]*)\"]\n    ];\n  }\n  \n  /* Finally exports the widget constructor. */\n  exports[\"action-sf-rawtext-trap-import\"] = RawTextTrapImport;\n  \n  })();","created":"20200902162043469","type":"application/javascript","modified":"20200902162100908","tags":"","module-type":"widget"}}}